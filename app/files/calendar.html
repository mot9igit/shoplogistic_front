<!DOCTYPE html>
<html lang="ru">

<head>
    @@include('./includes/meta.html')
</head>

<body class="loading">
    <div class="preloader">
        <div class="loader"></div>
    </div>    
    <div class="sl_wrapper">
        @@include('./includes/header.html')
        <main class="sl_main">
            @@include('./includes/breadcrumbs.html')
            <section class="sl-def-section">
                <div class="sl-base_wrapper">
                    <h1>Личный кабинет</h1>
                    <div class="sl-row">
                        <div class="d-col-md-3">
                            <div class="sl_side_menu">
                                <ul>
                                    <li>
                                        <a href="#">
                                            <i class="sl_icon sl_icon-orders"></i>
                                            <span>Список заказов</span>
                                        </a>
                                    </li>
                                    <li class="active">
                                        <a href="#">
                                            <i class="sl_icon sl_icon-cog"></i>
                                            <span>Настройки</span>
                                        </a>
                                    </li>
                                </ul>
                            </div>
                        </div>
                        <div class="d-col-md-9">
                            <div class="calendar">
                                <div class="calendar_wrap calendar_nav">                                        
                                    <span class="current_month">Май, 2022</span>
                                    <div class="calendar_nav__buttons">
                                        <a href="#" class="calendar_prev_month calendar_navigation" data-month="4" data-year="2022">
            
                                        </a>
                                        <a href="#" class="calendar_next_month calendar_navigation" data-month="6" data-year="2022">
                                            
                                        </a>
                                    </div>
                                </div>
                                <div class="desktop_calendar calendar_wrap">
                                    <div class="calendar_days">
                                        <div class="calendar_days_header day_wrap">
                                            <div class="day">
                                                <span>Пн</span>
                                            </div>
                                            <div class="day">
                                                <span>Вт</span>
                                            </div>
                                            <div class="day">
                                                <span>Ср</span>
                                            </div>
                                            <div class="day">
                                                <span>Чт</span>
                                            </div>
                                            <div class="day">
                                                <span>Пт</span>
                                            </div>
                                            <div class="day">
                                                <span>Сб</span>
                                            </div>
                                            <div class="day">
                                                <span>Вс</span>
                                            </div>
                                        </div>
                                        <div class="calendar_days_body">
                                            <div class="week day_wrap">
                                                <div class="day">

                                                    <span class="day_number diff_month ">25</span>
                                                </div>
                                                <div class="day">

                                                    <span class="day_number diff_month ">26</span>
                                                </div>
                                                <div class="day">

                                                    <span class="day_number diff_month ">27</span>
                                                </div>
                                                <div class="day">

                                                    <span class="day_number diff_month ">28</span>
                                                </div>
                                                <div class="day">

                                                    <span class="day_number diff_month ">29</span>
                                                </div>
                                                <div class="day">

                                                    <span class="day_number diff_month ">30</span>
                                                </div>
                                                <div class="day">

                                                    <span class="day_number  ">1</span>
                                                </div>
                                            </div>
                                            <div class="week day_wrap">
                                                <div class="day">

                                                    <span class="day_number  ">2</span>
                                                </div>
                                                <div class="day">

                                                    <span class="day_number  ">3</span>
                                                </div>
                                                <div class="day">

                                                    <span class="day_number  ">4</span>
                                                </div>
                                                <div class="day">

                                                    <span class="day_number  ">5</span>
                                                </div>
                                                <div class="day">

                                                    <span class="day_number  ">6</span>
                                                </div>
                                                <div class="day">

                                                    <span class="day_number  ">7</span>
                                                </div>
                                                <div class="day">

                                                    <span class="day_number  ">8</span>
                                                </div>
                                            </div>
                                            <div class="week day_wrap">
                                                <div class="day">

                                                    <span class="day_number  ">9</span>
                                                </div>
                                                <div class="day">

                                                    <span class="day_number  ">10</span>
                                                </div>
                                                <div class="day">

                                                    <span class="day_number  ">11</span>
                                                </div>
                                                <div class="day">

                                                    <a href="#" data-bs-toggle="modal" data-bs-target="#diler" class="day_number has_event">12</a>
                                                   
                                                </div>
                                                <div class="day">

                                                    <span class="day_number  ">13</span>
                                                </div>
                                                <div class="day">

                                                    <span class="day_number  ">14</span>
                                                </div>
                                                <div class="day">

                                                    <span class="day_number  ">15</span>
                                                </div>
                                            </div>
                                            <div class="week day_wrap">
                                                <div class="day">

                                                    <span class="day_number  ">16</span>
                                                </div>
                                                <div class="day">

                                                    <span class="day_number  ">17</span>
                                                </div>
                                                <div class="day">

                                                    <span class="day_number  ">18</span>
                                                </div>
                                                <div class="day">

                                                    <span class="day_number  ">19</span>
                                                    
                                                </div>
                                                <div class="day">

                                                    <span class="day_number  ">20</span>
                                                </div>
                                                <div class="day">

                                                    <span class="day_number  ">21</span>
                                                </div>
                                                <div class="day">

                                                    <span class="day_number  ">22</span>
                                                </div>
                                            </div>
                                            <div class="week day_wrap">
                                                <div class="day">

                                                    <span class="day_number  ">23</span>
                                                </div>
                                                <div class="day">

                                                    <span class="day_number  ">24</span>
                                                </div>
                                                <div class="day">

                                                    <span class="day_number  ">25</span>
                                                </div>
                                                <div class="day">

                                                    <span class="day_number  ">26</span>
                                                </div>
                                                <div class="day">

                                                    <span class="day_number  ">27</span>
                                                </div>
                                                <div class="day">

                                                    <span class="day_number  ">28</span>
                                                </div>
                                                <div class="day">

                                                    <span class="day_number  ">29</span>
                                                </div>
                                            </div>
                                            <div class="week day_wrap">
                                                <div class="day">

                                                    <span class="day_number today">30</span>
                                                </div>
                                                <div class="day">

                                                    <span class="day_number future">31</span>
                                                </div>
                                                <div class="day">

                                                    <span class="day_number diff_month future">1</span>
                                                </div>
                                                <div class="day">

                                                    <span class="day_number diff_month future">2</span>
                                                </div>
                                                <div class="day">

                                                    <span class="day_number diff_month future">3</span>
                                                </div>
                                                <div class="day">

                                                    <span class="day_number diff_month future">4</span>
                                                </div>
                                                <div class="day">

                                                    <span class="day_number diff_month future">5</span>
                                                </div>
                                                
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            
                            <div class="dilers-shipping-list">
                                <!-- item -->
                                <div class="item">
                                    <div class="sl-row sl-align-items-center">
                                        <div class="d-col-md-4 d-col-12">
                                            <div class="text-block">
                                                <span class="name">Наименование магазина</span>
                                                <span class="desc">Населенный пункт</span>
                                            </div>
                                        </div>
                                        <div class="d-col-md-4 d-col-12">
                                            <div class="text-block central-panel">
                                                <span class="name">Дата ближайшей отгрузки</span>
                                                <span class="desc">23.07.2022</span>
                                            </div>
                                        </div>
                                        <div class="d-col-md-4 d-col-12">
                                            <div class="status success">
                                                <span>Отгрузка запланирована</span>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <!-- / item -->
                                <!-- item -->
                                <div class="item">
                                    <div class="sl-row sl-align-items-center">
                                        <div class="d-col-md-4 d-col-12">
                                            <div class="text-block">
                                                <span class="name">Наименование магазина</span>
                                                <span class="desc">Населенный пункт</span>
                                            </div>
                                        </div>
                                        <div class="d-col-md-4 d-col-12">
                                            <div class="text-block central-panel">
                                                <span class="name">Дата ближайшей отгрузки</span>
                                                <span class="desc">-</span>
                                            </div>
                                        </div>
                                        <div class="d-col-md-4 d-col-12">
                                            <div class="status">
                                                <span>Отгрузка не запланирована</span>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <!-- / item -->
                            </div>
                        </div>
                    </div>
                </div>
            </section>
        </main>
        @@include('./includes/footer.html')
        <div class="modal fade" id="diler" tabindex="-1" aria-labelledby="diler_title" aria-modal="true" role="dialog">
            <div class="modal-dialog modal-dialog-centered">
              <div class="modal-content">
                <div class="modal-header">
                  <h5 class="modal-title" id="remain_title">Добавление отгрузки</h5>
                  <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <form method="post" class="sl_form">
                        <input type="hidden" name="sl_action" value="diler/add">
                        <input type="hidden" name="product_id" value="148">
                        <input type="hidden" name="col_id" value="1">
                        <input type="hidden" name="type" value="slStores">
                        <div class="message"></div>
                        <div class="dilers_form">
                            <div class="form_input_group input_pl input-parent d-cloned">					
                                <input type="text" class="base_input diler" data-idx="1" id="diler_diler" placeholder="Наименование дилера" name="diler[]" value=""> 
                                <label for="diler_diler" class="s-complex-input__label">Наименование дилера</label>
                                <input type="hidden" name="d[]" class="hd" value="" data-idx="1"/>
                            </div>
                        </div>                    
                        <div class="add_field">
                            <div class="form_input_group input_pl input-parent required">	
                                <a href="#" data-idx="1" class="sl-btn sl-btn-more more_diler">+ добавить еще</a>
                            </div>
                        </div>
                        <div class="form_input_group input_pl input-parent required">
                            <label for="remain_price">Комментарий</label>
                            <textarea class="base_input" name="description"></textarea>
                        </div>
                        <div class="form_input_group input_pl text-center">
                            <button type="submit" class="sl-btn sl-btn-primary">
                                <span class="tm">Сохранить</span>
                            </button>
                        </div>
                    </form>
                </div>
              </div>
            </div>
        </div>
    </div>
    @@include('./includes/scripts.html')
    <script>
        var datasrc = [
                {label: 'ООО "СпецПрофОборудование"', id: '1'},
                {label: '«Технолюкс»', id: '2'},
                {label: '«Взял Сделал», Карталы', id: '3'},
                {label: '«Взял Сделал», Варна', id: '3'},
            ];
        function setAutocomplete(){            
            $('.diler').each(function(){
                $(this).autocomplete({
                    source: datasrc,         // handler ajax https://stackoverflow.com/questions/15003830/jquery-autocomplete-custom-data-and-display-apart-from-label-value
                    select: function (a, b) {
                        var idx = $(this).data('idx');
                        $('input.hd[data-idx='+idx+']').val(b.item.id)
                        //target.value = b.item.label;
                    }
                }).autocomplete( "instance" )._renderItem = function( ul, item ) {
                    var it = $( "<li>" )
                        .append( "<div>" + item.label + " (" + item.id + ")</div>" )
                        .appendTo( ul );
                    return it;
                };
            })
        }
        $(document).ready(function(){            
            setAutocomplete();
            // dilers
            $('.more_diler').click(function(e){
                e.preventDefault();
                var element = $('.d-cloned:first');
                var idx = $('.d-cloned').length + 1;
                var c = element.clone();
                c.find('input').removeClass('ui-autocomplete-input').removeAttr("autocomplete").attr("data-idx", idx);
                c.appendTo('.dilers_form');
                $('.more_diler').attr('data-idx', idx);
                setAutocomplete();
                var modal = new bootstrap.Modal(document.getElementById("diler"), {});
                //modal.show();
            });
        });        
    </script>
</body>

</html>